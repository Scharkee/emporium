!function(){var e=function(e){var t={exports:{}};return e.call(t.exports,t,t.exports),t.exports},t=(window,function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}()),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(e){return e&&e.__esModule?e:{"default":e}},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t},s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(a===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:e(r,i,n)}if("value"in a)return a.value;var o=a.get;return o===undefined?undefined:o.call(n)},l=function(){function e(e,t){var i=[],n=!0,a=!1,r=undefined;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,r=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(a)throw r}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Shopify.Components,d=Shopify.Loading,h=Shopify.hotshot,c=Shopify.Browser,f=Shopify.Keycodes,p=Shopify.Flash,m=Shopify.Events,y=Shopify.AnalyticsAPI,v=Shopify.Money,g=Shopify.Number,E=Shopify.Time,k=Shopify.routes,O=Shopify.Inflection,D=Shopify.range,T=window.Page;(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Shopify.Remote=function(){function t(t,i,n,a){this.ajaxOptions=null!=t?t:{},this.refreshOnSuccess=i,this.refreshOnError=n,this.fullRefresh=null!=a&&a,this.submit=e(this.submit,this)}return t.prototype.submit=function(){var e;Shopify.Loading.start(),e=$.ajax(this.ajaxOptions),e.always(function(){return Shopify.Loading.stop()}),e.done(function(e){return function(t,i,n){var a,r,o;return(a=n.getResponseHeader("X-Next-Redirect"))?void Page.visit(a,{reload:!0}):(null!=(r=e.ajaxOptions.done)&&r.apply(null,arguments),o=e.refreshOnSuccess?e.refreshOnSuccess.split(" "):[],e.fullRefresh?Page.refresh({onlyKeys:o}):"false"!==e.refreshOnSuccess?Page.refresh({response:n,onlyKeys:o}):void 0)}}(this)),e.fail(function(e){return function(t,i,n){var a;if(null!=(a=e.ajaxOptions.fail)&&a.apply(null,arguments),"false"!==e.refreshOnError)return e.refreshOnError?Page.refresh({response:t,onlyKeys:e.refreshOnError.split(" ")}):Shopify.handleError(t,i,n)}}(this))},t}()}).call(this),function(){Shopify.DashboardActivity=function(){function e(e){this.activityFilter=e||"all"}return e.prototype.activityLoading=!1,e.prototype.loadMoreActivity=function(e){return this.activityLoading=!0,this.xhr&&this.xhr.abort(),this.xhr=$.ajax({dataType:"html",data:{activity_pages:e,activity_filter:this.activityFilter},url:"/admin/dashboard/activity_feed",success:function(e){return function(){return Page.refresh({onlyKeys:["dashboardActivity"],response:e.xhr})}}(this),done:function(){return this.activityLoading=!1}}),this.xhr.fail(Shopify.handleError)},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Shopify.SummaryReport=function(){function t(t,i){var n;null==i&&(i={}),this.changeChannelProvider=e(this.changeChannelProvider,this),this.changeDateRange=e(this.changeDateRange,this),this.$node=$(t),this.queryProps||(this.queryProps={startDate:"-30d",endDate:"-1d",channelFilter:""}),n=Object.assign({},i.actionConfig),n[Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT]=this.changeChannelProvider,Shopify.rootDispatcher.register(n).bindToNode(t),this.initializeView(),this._load()}return t.prototype.FINANCES_PATH="finances/show",t.prototype.queries=function(){throw new Error("Subclasses must define at least one shopifyQL query.")},t.prototype.initializeView=function(){},t.prototype.createTemplate=function(e){var t;return t=this.$node.find(e).remove(),_.template(t.html())},t.prototype.append=function(e,t){return this.$node.empty(),this.$node.append(e(t))},t.prototype.extractKey=function(e){var t,i;return t=e.query.columns[0].field,i=Shopify.Inflection.classify(t),i.charAt(0).toLowerCase()+i.substring(1)},t.prototype.changeDateRange=function(e){var t,i,n;return i=e.data,n=i.startDate,t=i.endDate,this.queryProps.startDate=n,this.queryProps.endDate=t,this._load()},t.prototype.changeChannelProvider=function(e){var t,i,n;return n=e.data.split("-"),t=n[0],i=n[1],"all"===t?this.queryProps.channelFilter="":(this.queryProps.channelFilter="WHERE channel_provider_id == "+t,i&&(this.queryProps.channelFilter+=" AND location_id == '"+i+"'")),this._load()},t.prototype._load=function(){var e,t;return this.renderLoading&&this.renderLoading(),e=this.queries(),Promise.all(function(){var i;i=[];for(t in e)i.push(Shopify.AnalyticsAPI.query(e[t]));return i}()).then(this.renderResult.bind(this))["catch"](this.renderError.bind(this))},t.prototype.renderResult=function(){throw new Error("Subclasses must handle successful query results.")},t.prototype.renderError=function(){throw new Error("Subclasses must handle failed query results.")},t}()}.call(this),function(){var e,t,i,n=function(e,t){return function(){return e.apply(t,arguments)}};t="reports:channelpicker:channel-changed",e="reports:channelpicker:after-channel-changed",i="SHOW orders\nFROM sales\nWHERE financial_status != 'refunded'\nSINCE -90d\nUNTIL 0d",Shopify.SummaryReportChannelpicker=function(){function a(e,t){this._onChannelChanged=n(this._onChannelChanged,this),this.channelLabels={},this.$node=$(e),t.forEach(function(e){return function(t){var i,n;return i=t.id.split("-")[1],i?(n=t.name.indexOf("\u2014"),e.channelLabels[t.id]=t.name.substring(n+1)):e.channelLabels[t.id]=t.name}}(this)),Shopify.rootDispatcher.register(Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT,this._onChannelChanged).bindToNode(e),this._checkForOtherOrders()}return a.CHANNEL_CHANGED_EVENT=t,a.AFTER_CHANNEL_CHANGED_EVENT=e,a.prototype.setChannel=function(e){return this.currentChannelId=e,Shopify.rootDispatcher.dispatch({type:t,data:this.currentChannelId}),Shopify.UIPopover.deactivate()},a.prototype._onChannelChanged=function(t){return this.currentChannelId=t.data,this.currentChannelLabel=this.channelLabels[this.currentChannelId],Shopify.rootDispatcher.dispatch({type:e,data:this.currentChannelId})},a.prototype._checkForOtherOrders=function(){return Shopify.AnalyticsAPI.query(i).then(function(e){return function(t){if(t.result.data[0][0]>0)return e.$node.find(".js-other-channel").removeClass("hide")}}(this))},a}()}.call(this);var b=(e(function(e,n){"use strict";function a(e,t){$.ajax({url:e,type:"POST",data:t||{}})}Object.defineProperty(n,"__esModule",{value:!0});var r="https://youtube.com/embed",o=function(){function e(t,n){i(this,e),this.$node=$(t),this.options=n,this.videoVisible=!1}return t(e,[{key:"removeVideo",value:function(){this.$node.html(""),this.videoVisible=!1}},{key:"render",value:function(){this.$node.html(""),this.videoVisible=!0,$("<iframe>",{src:r+"/"+this.options.videoId+(this.options.videoParams||""),frameborder:0,allowfullscreen:""}).appendTo(this.$node),a(this.options.trackingUrl,this.options.trackingData)}}]),e}();n["default"]=o,Shopify.YoutubePlayer=null!=n["default"]?n["default"]:n}),e(function(e,n){"use strict";function a(e){var t=document.createElement("iframe");return t.id=e,t.src=r(e),t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",!0),t}function r(e){return s+"/"+e+"?"+l.join("&")+"&autoplay=true&player_id="+e}function o(e,t){$.ajax({url:e,type:"POST",data:t||{}})}Object.defineProperty(n,"__esModule",{value:!0});var s="https://player.vimeo.com/video",l=["title=0","byline=0","portrait=0","api=1"],u=function(){function e(t,n){i(this,e),this.node=t,this.options=n,this.videoVisible=!1}return t(e,[{key:"removeVideo",value:function(){this.videoVisible=!1,this.iframe.remove()}},{key:"render",value:function(){this.iframe=a(this.options.videoId),this.node.appendChild(this.iframe),this.videoVisible=!0,o(this.options.trackingUrl,this.options.trackingData)}}]),e}();n["default"]=u,Shopify.VimeoPlayer=null!=n["default"]?n["default"]:n}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n(_),o=n($),s=2,l=250,u=function(){function e(t){i(this,e),this.cleanup=this.cleanup.bind(this),this._consumedCards=this._consumedCards.bind(this),this._recordConsumedCards=this._recordConsumedCards.bind(this),this._resetTimer=this._resetTimer.bind(this),this.throttledFunction=r["default"].throttle(this._resetTimer,l),this.recentlyConsumedCards=new Set,this.requestId=t.requestId,this.$window=(0,o["default"])(window),Page.onReplace((0,o["default"])(".page")[0],this.cleanup)}return t(e,[{key:"watch",value:function(){this.$window.on("scroll",this.throttledFunction),this._startTimer()}},{key:"cleanup",value:function(){this._clearTimer(),this.$window.off("scroll",this.throttledFunction)}},{key:"_consumedCards",value:function(){var e=this,t=[];return(0,o["default"])(".ui-feed__item--card").each(function(i,n){var a=(0,o["default"])(n),r=a.data("handle"),s=a.data("analytics-group"),l=i+1;e._isOnScreen(a)&&!e.recentlyConsumedCards.has(r)&&t.push({handle:r,analytics_group:s,position:l})}),t}},{key:"_recordConsumedCards",value:function(){var e=this,t=this._consumedCards();t.forEach(function(t){return e.recentlyConsumedCards.add(t.handle)}),t.length>0&&this._submitConsumedCards(t)}},{key:"_isOnScreen",value:function(e){var t=(0,o["default"])(".header").height()+(0,o["default"])("#turbo").height(),i=this.$window.scrollTop(),n={top:i+t,bottom:i+this.$window.height()},a=e.offset();return a.bottom=a.top+e.outerHeight(),a.top>=n.top&&a.bottom<=n.bottom}},{key:"_startTimer",value:function(){this.timeout=window.setTimeout(this._recordConsumedCards,1e3*s)}},{key:"_clearTimer",value:function(){this.timeout&&window.clearTimeout(this.timeout),this.timeout=null}},{key:"_resetTimer",value:function(){this._clearTimer(),this._startTimer()}},{key:"_submitConsumedCards",value:function(e){o["default"].ajax({url:"/admin/home/consume_cards",data:JSON.stringify({cards:e,original_request_id:this.requestId}),type:"POST",contentType:"application/json"})}}]),e}();a["default"]=u,Shopify.CardConsumption=null!=a["default"]?a["default"]:a}),e(function(e,t){"use strict";function i(e,t){var i=500,n=400,a=screen.width/2-i/2,r=screen.height/2-n/2,o=["width="+i,"height="+n,"left="+a,"top="+r,"toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=yes","copyhistory=no","resizable=yes"];window.open(e,t,o.join(" "))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i,Shopify.CenterPopup=null!=t["default"]?t["default"]:t}),e(function(e,a){"use strict";function r(e,t){l["default"].ajax({url:t,type:"POST",data:e})}Object.defineProperty(a,"__esModule",{value:!0});var o=n(Twine),s=n(_),l=n($),d={VOTE_DIALOG_HEADER:"next-card--home-card-feedback",VOTE_DIALOG_SURVEY:"js-home-vote-dialog-survey",VOTE_DIALOG_UPVOTE_THANKS:"js-home-vote-dialog-upvote-thanks",VOTE_DIALOG_DOWNVOTE_THANKS:"js-home-vote-dialog-downvote-thanks",FEEDBACK_OVERLAY:"home-card-overlay--feedback",FEEDBACK_COMMENT_BOX:"js-feedback-comment",FEEDBACK_OPTION:"feedback-form__item",FEEDBACK_OPTION_WRAPPER:"feedback-form",UNDO_OVERLAY:"js-home-card-undo-overlay",FEEDBACK_MENU:"js-feedback-menu",DROPDOWN_BUTTON:"js-dropdown-button",CARD:"next-card",HIDE:"hide",POPOVER_BUTTON:"btn--popover-activator"},h={UPVOTE:1,DOWNVOTE:0},c={ANIMATION:200,HIDE_CARD:2500,HIDE_VOTE_DIALOG:1250},f={FEEDBACK_BASE:228,FEEDBACK_REASON:20,FEEDBACK_REASON_SPACING:10,UNDO_OVERLAY:150,ICON_ORIGINAL:20},p=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,e),this.onAction=this.onAction.bind(this),this.hideVoteDialog=this.hideVoteDialog.bind(this),this._hideUndoOverlay=this._hideUndoOverlay.bind(this),this._unregisterOnActionListeners=this._unregisterOnActionListeners.bind(this),this.voteDialogValue=null,this.options=n,this.$node=(0,l["default"])(t),this.feedbackHeading="Send feedback",this.$cardNode=this.$node.find("."+d.CARD).first(),this.$voteDialogNode=this.$node.find("."+d.VOTE_DIALOG_HEADER),this.$popoverButtonNode=this.$node.find("."+d.POPOVER_BUTTON),this._registerOnActionListeners(),Page.onReplace(t,this._unregisterOnActionListeners)}return t(e,[{key:"onAction",value:function(e){var t={};s["default"].get(e,"target.dataset.buttonId")&&(t.button_id=s["default"].get(e,"target.dataset.buttonId")),this._trackEvent("register_card_engagement_url",t)}},{key:"dismiss",value:function(){u.Popover.deactivate(),this._storeOriginalHeight(),this._resizeToUndoOverlayHeight(),this.$popoverButtonNode.addClass("hide"),this._trackEvent("dismiss_card_url"),this._updateUndoDialog({heading:"You dismissed this card",message:this.options.dismiss_message,action:"dismiss"})}},{key:"upvote",value:function(){this.voteDialogValue=h.UPVOTE,this._trackEvent("upvote_card_url"),this._updateVoteDialogThanks()}},{key:"downvote",value:function(){this.voteDialogValue=h.DOWNVOTE,this._trackEvent("downvote_card_url"),this._updateVoteDialogThanks()}},{key:"showFeedbackDialog",value:function(){u.Popover.deactivate(),this.hideAfterFeedback=!1,this._storeOriginalHeight(),this._expandFeedbackDialog(),this.$popoverButtonNode.addClass("hide")}},{key:"showFeedbackDialogFromDismiss",value:function(){this.hideAfterFeedback=!0,this._updateUndoDialog({}),o["default"].refresh(),this._expandFeedbackDialog()}},{key:"showFeedbackDialogFromVote",value:function(){this.hideVoteDialog(),this.hideAfterFeedback=!1,this.voteDialogValue===h.UPVOTE?(this.feedbackHeading="What did you find useful?",this.$node.find("."+d.FEEDBACK_OPTION).addClass("hide"),this.$node.find("."+d.FEEDBACK_OPTION_WRAPPER).addClass("hide"),this.selectedFeedbackOption="This is useful"):(this.$node.find('input[value="This is useful"]').closest("."+d.FEEDBACK_OPTION).addClass("hide"),this.$node.find('input[value="This isn\'t useful"]').prop("checked",!0),this.selectedFeedbackOption="This isn't useful"),this._storeOriginalHeight(),this._expandFeedbackDialog(),this.$node.find("."+d.FEEDBACK_COMMENT_BOX).focus()}},{key:"hideFeedbackDialog",value:function(){this.$node.find("."+d.FEEDBACK_OVERLAY).addClass(d.HIDE),null!==this.voteDialogValue&&(this.$node.find("."+d.FEEDBACK_OPTION).removeClass("hide"),this.voteDialogValue===h.UPVOTE&&(this.$node.find("."+d.FEEDBACK_OPTION_WRAPPER).removeClass("hide"),this.feedbackHeading="Send feedback"),this.voteDialogValue=null),this.selectedFeedbackOption=null,this.selectedFeedbackComment=null}},{key:"cancelFeedbackDialog",value:function(){if(this.hideAfterFeedback)return void this.hide();this.hideFeedbackDialog(),this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass("hide")}},{key:"hideVoteDialog",value:function(){this.$voteDialogNode.animate({opacity:0,height:0,"min-height":0},{duration:c.ANIMATIONS})}},{key:"undo",value:function(){"dismiss"===this.undoAction&&(this._trackEvent("undo_dismiss_card_url"),this._hideUndoOverlay())}},{key:"submitFeedback",value:function(){var e=null===this.voteDialogValue?this.options.submit_feedback_url:this.options.card_vote_feedback_url;if(r({handle:this.options.handle,analytics_group:this.options.analytics_group,feedback:this.selectedFeedbackOption,comment:this.selectedFeedbackComment},e),this.hideAfterFeedback)return void this.hide();this.hideFeedbackDialog(),this._resizeToUndoOverlayHeight(),this._updateUndoDialog({heading:"Thanks for your feedback",message:"It will be used to improve your home feed.",action:null}),setTimeout(this._hideUndoOverlay,c.HIDE_CARD)}},{key:"isFeedbackSelected",value:function(){return this.selectedFeedbackOption||this.selectedFeedbackComment}},{key:"hide",value:function(){var e=this;this.$node.animate({opacity:0,height:0,"min-height":0},{duration:c.ANIMATION,complete:function(){e.$node.remove(),(0,l["default"])(".next-card.overlaid").length||window.location.reload()}})}},{key:"_expandFeedbackDialog",value:function(){var e=this;this.$node.find("."+d.FEEDBACK_OVERLAY).removeClass(d.HIDE),this.$node.find('input[type="radio"].feedback-reason').first().focus();var t=this._feedbackHeight();this.$cardNode.animate({height:t,"min-height":t},{duration:c.ANIMATION,complete:function(){return e.$cardNode.css({overflow:"hidden"})}})}},{key:"_hideUndoOverlay",value:function(){this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass("hide"),this._updateUndoDialog({}),o["default"].refresh()}},{key:"_updateVoteDialogThanks",value:function(){var e=this.voteDialogValue===h.UPVOTE?d.VOTE_DIALOG_UPVOTE_THANKS:d.VOTE_DIALOG_DOWNVOTE_THANKS;this.$voteDialogNode.find("."+d.VOTE_DIALOG_SURVEY).addClass("hide"),this.$voteDialogNode.find("."+e).removeClass("hide")}},{key:"_updateUndoDialog",value:function(e){this.undoHeading=e.heading,this.undoMessage=e.message,this.undoAction=e.action}},{key:"_trackEvent",value:function(e,t){var i=this.options[e];r(s["default"].merge(s["default"].pick(this.options,["handle","analytics_group"]),t),i)}},{key:"_feedbackHeight",value:function(){var e=this.$node.find("."+d.FEEDBACK_OPTION+":not(."+d.HIDE+")").length,t=e>0?f.FEEDBACK_REASON_SPACING:0;return t+=f.FEEDBACK_BASE+f.FEEDBACK_REASON*e}},{key:"_storeOriginalHeight",value:function(){this.originalHeight=this.$cardNode.height()}},{key:"_resizeToOriginalHeight",value:function(){var e=this;this.$cardNode.animate({height:this.originalHeight,"min-height":this.originalHeight},{duration:c.ANIMATION,complete:function(){return e.$cardNode.css({overflow:"",height:"","min-height":""})}})}},{key:"_resizeToUndoOverlayHeight",value:function(){var e=this;this.$cardNode.animate({height:f.UNDO_OVERLAY,"min-height":f.UNDO_OVERLAY},{duration:c.ANIMATION,complete:function(){return e.$cardNode.css({overflow:"hidden"})}})}},{key:"_registerOnActionListeners",value:function(){var e=["a","input[type=submit]","button:not(."+d.FEEDBACK_OVERLAY+" button","."+d.UNDO_OVERLAY+" button","."+d.FEEDBACK_MENU+" button","."+d.DROPDOWN_BUTTON+")"];this.$cardNode.on("click",e.join(", "),this.onAction)}},{key:"_unregisterOnActionListeners",value:function(){this.$cardNode.off("click",this.onAction)}}]),e}();a["default"]=p,Shopify.HomeCard=null!=a["default"]?a["default"]:a})),S=(e(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(b),s=function(e){function t(e,n){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.$node.find('.btn[href="#"]').on("click",function(e){return e.preventDefault(),a.hide()}),a}return a(t,e),t}(o["default"]);t["default"]=s,Shopify.CustomFeedCard=null!=t["default"]?t["default"]:t}),e(function(e,t){"use strict";function i(){l(),s()}function a(){_(),p()}function r(){(0,D["default"])(".page").toggleClass("page--sidebar-is-visible"),setTimeout(function(){return(0,D["default"])(window).trigger("resize")})}function o(e){var t=this;this.hidden=!0;var i=e.severity||null,n=i+"-notification-collapsible-container";u.rootDispatcher.register("collapsible:collapsed",function(e){n===e.data.collapsibleInstance.id&&(t.hidden=!0,T["default"].refresh())}),u.rootDispatcher.register("collapsible:expanded",function(e){n===e.data.collapsibleInstance.id&&(t.hidden=!1,T["default"].refresh())})}function s(){var e=(0,D["default"])(".nav-toggle button"),t=(0,D["default"])(".page-home-index")[0];e.on("click",function(){(0,D["default"])(".page--sidebar-is-visible").length&&window.Shopify.Home.toggleSidebar()}),Page.onReplace(t,function(){return e.off("click")})}function l(){(0,D["default"])("."+P+" a[tg-remote='delete']").one("click",h)}function h(e){var t=e.currentTarget,i=(0,D["default"])(t).closest("."+P),n=(0,D["default"])(t).closest("."+S),a=void 0;a=n.children().length<=2?n:i,a.slideUp(150,function(){i.next().is("HR")&&i.next().remove(),i.remove(),0===n.children().length&&n.remove(),b["default"].stop()})}function c(e){(0,D["default"])(e.target).closest(".next-card").css("z-index",C)}function f(e){(0,D["default"])(e.target).closest(".next-card").css("z-index","")}function p(){var e=(0,D["default"])(".ui-feed");e.on(u.Popover.EVENTS.ACTIVATING,".ui-popover",c),e.on(u.Popover.EVENTS.DEACTIVATED,".ui-popover",f),Page.onReplace(e[0],function(){e.off(u.Popover.EVENTS.ACTIVATING),e.off(u.Popover.EVENTS.DEACTIVATED)})}function m(e){var t=/\/admin/g;return e.host===window.location.host&&t.test(e.href)}function y(e){return"javascript:"!==e.protocol&&"mailto:"!==e.protocol&&"tel:"!==e.protocol}function _(){(0,D["default"])(".page-home-index .page__content a").each(function(e,t){var i=!m(t),n=y(t);if(i&&n||O(t)){var a=(0,D["default"])(t);a.attr("target","_blank"),a.addClass("external-link");var r=a.attr("href");a.attr("href",g(r))}})}function v(e){return-1!==e.indexOf("?")}function g(e){var t=e,i="";-1!==t.indexOf("#")&&(i=t.slice(t.indexOf("#")),t=t.slice(0,t.indexOf("#")));var n=v(t);return k(t)||(t=E(t,"utm_source","Shopify",!n),t=E(t,"utm_medium","AdminHomefeed"),t=E(t,"utm_campaign","Homecards")),""+t+i}function E(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return-1!==e.indexOf(t)?e:e+(n?"?":"&")+t+"="+i}function k(e){return v(e)&&-1!==e.indexOf("hmac=")}function O(e){var t=!0,i=!1,n=undefined;try{for(var a,r=N[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;if(-1!==e.href.indexOf(o))return!0}}catch(e){i=!0,n=e}finally{try{!t&&r["return"]&&r["return"]()}finally{if(i)throw n}}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationCard=t.toggleSidebar=t.onFeedLoaded=t.initialize=undefined;var D=n($),T=n(Twine),b=n(d),S="next-card__section",P="notification",C=2,N=["/admin/experts/redirect"];t.initialize=i,t.onFeedLoaded=a,t.toggleSidebar=r,t.NotificationCard=o,Shopify.Home=null!=t["default"]?t["default"]:t}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n(_),o=n($),s=n(d),l=function(){function e(t,n){i(this,e),this.onAction=this.onAction.bind(this),this.options=n,this.$node=(0,o["default"])(t),this._createOnActionListeners()}return t(e,[{key:"onAction",value:function(){o["default"].ajax({url:this.options.register_card_engagement_url,type:"POST",data:r["default"].pick(this.options,["handle","analytics_group","data"])})}},{key:"hide",value:function(){var e=this;this.$node.animate({opacity:0,height:0,"min-height":0},{duration:200,complete:function(){e.$node.remove(),s["default"].stop()}})}},{key:"_createOnActionListeners",value:function(){this.$node.find("a").on("click",this.onAction)}}]),e}();a["default"]=l,Shopify.Notification=null!=a["default"]?a["default"]:a})),P=(e(function(e,t){"use strict";function i(e,t){p.isKnownBrowser()&&!p.isMobile()&&(p.isMac()||p.isWindows())&&(a(s(),m.D_LOWER_CASE,t),$(e).append(l()))}function a(e,t,i){return d["default"].bindCombo([e,t],function(){return r(i)})}function r(e){e.hide(),e.onAction()}function s(){return p.isMac()?m.COMMAND:m.CONTROL}function l(){return"Press "+u(p.isMac()?"\u2318":"Ctrl")+" + "+u("D")+" to bookmark your Shopify admin."}function u(e){return'<kbd class="keyboard-key s-none">'+e+"</kbd>"}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var d=n(h),p=o(c),m=o(f);Shopify.BookmarkShortcut=null!=t["default"]?t["default"]:t}),e(function(e,s){"use strict";function l(){(0,u["default"])(c).each(function(e,t){return(0,u["default"])(t).find("input")[0].checked?((0,u["default"])(t).find(f).removeClass("hide"),(0,u["default"])(t).find(m).addClass("hide")):((0,u["default"])(t).find(m).removeClass("hide"),(0,u["default"])(t).find(f).addClass("hide"))})}Object.defineProperty(s,"__esModule",{value:!0}),s.toggleImage=l;var u=n($),d=n(b),h=o(p),c=".platform-feedback__input-container",f=".platform-feedback__image--select-state",m=".platform-feedback__image--null-state",y=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"submitResult",value:function(e){var t=JSON.parse(e);return"error"in t?h.error(t.error):(h.notice("Thanks for your feedback!"),this.hide())}}]),n}(d["default"]);s["default"]=y,Shopify.QuestionCard=null!=s["default"]?s["default"]:s}),e(function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var l=n(Twine),u=n(S),d=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"onAction",value:function(){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onAction",this).call(this),l["default"].context(document.body).uploadRequestedDocumentsModal.show()}}]),n}(u["default"]);o["default"]=d,Shopify.RequestedDocumentsNotification=null!=o["default"]?o["default"]:o}),e(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(t){i(this,e),this.$dataList=$(t).find(".home-data-list")}return t(e,[{key:"showMore",value:function(){var e=this,t=this._truncatedHeight(),i=this._fullHeight();this.$dataList.css("max-height",t),this.$dataList.find(".home-data-list__item.hide").removeClass("hide"),$(".home-data-list__show-more, .home-data-list__show-less").toggleClass("hide"),window.setTimeout(function(){return e.$dataList.addClass("home-data-list--expanded").css("max-height",i)},0)}},{key:"showLess",value:function(){var e=this.$dataList;e.one("transitionend",function(){e.removeClass("home-data-list__wrapper--expanded")}),e.css("max-height",this.truncatedHeight),$(".home-data-list__show-more, .home-data-list__show-less").toggleClass("hide")}},{key:"_truncatedHeight",value:function(){return this.truncatedHeight||(this.truncatedHeight=this.$dataList.height()),this.truncatedHeight}},{key:"_fullHeight",value:function(){if(!this.fullHeight){var e=1,t=this.$dataList.find("li.hide").length,i=this.$dataList.find("li").length-t-e;this.fullHeight=this.truncatedHeight+this.truncatedHeight/i*t}return this.fullHeight}}]),e}();n["default"]=a,Shopify.DataList=null!=n["default"]?n["default"]:n}),e(function(e,a){"use strict";function r(e){e.each(function(e,t){var i=(0,d["default"])(t),n=i.find(".ui-feed__item.ui-feed__item--card");l(n,s(n)),u(i,n)})}function o(e){e.each(function(e,t){h["default"].bind(t)})}function s(e){var t=void 0;return e.toArray().map(function(e,i){return 0===i?(t=e.getBoundingClientRect().top,0):e.getBoundingClientRect().top-t})}function l(e,t){e.each(function(i,n){(0,d["default"])(n).css({zIndex:e.length-i,transform:"translateY(-"+t[i]+"px)"})})}function u(e,t){requestAnimationFrame(function(){e.find(".js-animated-heading").css({opacity:"1"}),t.each(function(e,t){(0,d["default"])(t).css({transitionDuration:"400ms",transform:"translateY(0)"}).one((0,m.transitionEnd)(),function(){(0,d["default"])(t).css({transitionDuration:"",transform:"",zIndex:""})})})})}Object.defineProperty(a,"__esModule",{value:!0});var d=n($),h=n(Twine),c=5,f=function(){function e(){i(this,e),this.timesRetried=0,this.$feedNode=(0,d["default"])(".skeleton-feed")}return t(e,[{key:"loadHomeFeed",value:function(){var e=this;return new Promise(function(t){function i(e){e.$feedNode.find(".skeleton-feed__heading--section").removeClass("skeleton-feed__heading--section").addClass("home-channel-data-error").html("Unable to retrieve Home Feed. Retrying..."),e.timesRetried===c&&e.$feedNode.find(".home-channel-data-error").html("Unable to retrieve Home Feed. Please refresh the page to try again."),setTimeout(function(){e.timesRetried++,e.loadHomeFeed()},1e3*e.timesRetried)}d["default"].ajax({type:"GET",url:"/admin/home/feed",dataType:"html",success:function(n,a,s){if(s.getResponseHeader("Shopify-Auth-Mechanisms"))i(e);else{e.$feedNode.hide().html(n).show(),e.$feedNode.addClass("skeleton-feed--is-loaded");var l=e.$feedNode.find(".ui-feed");r(l),o(l),(0,d["default"])(document).trigger("page:load"),t(n)}},error:function(){i(e)}})})}}]),e}();a["default"]=f,Shopify.Skeleton=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n(_),s=o(y),l=function(){function e(t,n){i(this,e),this._poll=this._poll.bind(this),this.handleData=this.handleData.bind(this),this.options=t,this.onDataReceived=n,this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX}return t(e,[{key:"startPolling",value:function(){this.timeout=window.setTimeout(this._poll,0)}},{key:"stopPolling",value:function(){window.clearTimeout(this.timeout)}},{key:"handleData",value:function(e){var t=e.result,i=t.data;if(i&&i[0]){var n=this._transformData(i[0]);this._hasChanged(n)?(this.onDataReceived(n),this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX):this.pollFrequencyIndex!==this.POLL_FREQUENCIES.length-1&&this.pollFrequencyIndex++}this.timeout=window.setTimeout(this._poll,this.POLL_FREQUENCIES[this.pollFrequencyIndex])}},{key:"_poll",value:function(){return s.query(this._query()).then(this.handleData.bind(this))}},{key:"_query",value:function(){throw new Error("Subclasses of PollableMetric must define a query")}},{key:"_transformData",value:function(e){return e}},{key:"_hasChanged",value:function(e){return(!this.cachedData||!r["default"].isEqual(e,this.cachedData))&&(this.cachedData=e,!0)}}]),e}();a["default"]=l,l.prototype.POLL_FREQUENCIES=[5e3,1e4,3e4,6e4],l.prototype.DEFAULT_POLL_FREQUENCY_INDEX=0,Shopify.PollableMetric=null!=a["default"]?a["default"]:a})),C=e(function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=n(P),l=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"_query",value:function(){return"SHOW total_sessions FROM visits SINCE today UNTIL today"}},{key:"_transformData",value:function(e){return{totalVisits:e[0]}}}]),n}(s["default"]);o["default"]=l,Shopify.PollableVisitsMetric=null!=o["default"]?o["default"]:o}),N=e(function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=n(P),l=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"_query",value:function(){return this.options.hasOnlineStore?"SHOW total_sales FROM sales SINCE today UNTIL today":"SHOW total_sales, total_orders FROM sales SINCE today UNTIL today"}},{key:"_transformData",value:function(e){return{totalSales:e[0],totalOrders:e[1]}}}]),n}(s["default"]);o["default"]=l,l.prototype.DEFAULT_POLL_FREQUENCY_INDEX=1,Shopify.PollableSalesMetric=null!=o["default"]?o["default"]:o}),A=(e(function(e,a){"use strict";function r(e,t){return Math.floor(s(e,t))}function s(e){return(e-(arguments.length>1&&arguments[1]!==undefined?arguments[1]:0))/10}function l(e){return f.withDelimiter(e)}function u(e){return c["default"].format(e,c["default"].moneyUnencodedFormat())}Object.defineProperty(a,"__esModule",{value:!0});var d=n(Twine),h=n($),c=n(v),f=o(g),p=o(E),m=n(C),y=n(N),_=function(){function e(t,n){i(this,e),this.stopPolling=this.stopPolling.bind(this),this._updateData=this._updateData.bind(this);var a=(0,h["default"])(t).closest(".page")[0];this.data={totalSales:0,totalOrders:0},this.humanized={},this.salesDataFeed=new y["default"](n,this._updateData),n.hasOnlineStore&&(this.data.totalVisits=0,this.visitsDataFeed=new m["default"](n,this._updateData)),Page.onReplace(a,this.stopPolling),this.startPolling()}return t(e,[{key:"startPolling",value:function(){this.salesDataFeed.startPolling(),this.visitsDataFeed&&this.visitsDataFeed.startPolling()}},{key:"stopPolling",value:function(){this.salesDataFeed.stopPolling(),this.visitsDataFeed&&this.visitsDataFeed.stopPolling()}},{key:"_updateData",value:function(e){var t=0===this.data[Object.keys(e)[0]],i=e[Object.keys(e)[0]]<this.data[Object.keys(e)[0]];return t||i?this._updateValuesAndRefresh(e):this._animateUpdateAndRefresh(e)}},{key:"_animateUpdateAndRefresh",value:function(e){var t=this,i=void 0,n=void 0,a=void 0;e.totalSales&&(a=s(e.totalSales,this.data.totalSales)),e.totalVisits&&(n=r(e.totalVisits,this.data.totalVisits)),e.totalOrders&&(i=r(e.totalOrders,this.data.totalOrders));var o=window.setInterval(function(){return a&&(t.data.totalSales+=a),n&&(t.data.totalVisits+=n),i&&(t.data.totalOrders+=i),t._humanizeDataAndRefresh()},100);return window.setTimeout(function(){
return window.clearInterval(o),t._updateValuesAndRefresh(e)},1e3)}},{key:"_updateValuesAndRefresh",value:function(e){return e.totalSales&&(this.data.totalSales=e.totalSales),e.totalVisits&&(this.data.totalVisits=e.totalVisits),e.totalOrders&&(this.data.totalOrders=e.totalOrders),this._humanizeDataAndRefresh()}},{key:"_humanizeDataAndRefresh",value:function(){return(this.data.totalSales||0===this.data.totalSales)&&(this.humanized.totalSales=u(this.data.totalSales)),(this.data.totalVisits||0===this.data.totalVisits)&&(this.humanized.totalVisits=l(this.data.totalVisits)),(this.data.totalOrders||0===this.data.totalOrders)&&(this.humanized.totalOrders=l(this.data.totalOrders)),this.humanized.date=p.nowShop().moment.format("MMM D"),d["default"].refresh()}}]),e}();a["default"]=_,Shopify.TodayFeature=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n(Bugsnag),o=function(){function e(t,n){i(this,e),this.task=t,this.checked=n,this.dismissed=!1}return t(e,[{key:"revertCheckedState",value:function(){this.checked=!this.checked,r["default"].notify("GoalTaskCheckFailed","Failed to check")}}]),e}();a["default"]=o,Shopify.GoalTask=null!=a["default"]?a["default"]:a})),w=(e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n($),o=n(A),s=n(window.SafeLocalStorage),l="goals_overlay-dismissed",u="goals_expanded",d=function(){function e(t,n){var a=n.handle,o=n.id,d=n.locked,h=n.lockUrl,c=n.inProgress,f=n.shopUnlocked,p=n.completionOverlay,m=n.complete;i(this,e),this.$node=(0,r["default"])(t),this.id=o,this.handle=a,this.locked=d,this.lockUrl=h,this.shopUnlocked=f,this.tasks={},this.completionOverlay=p,this.overlayKey=l+"_"+a,this.overlayDismissed=s["default"].get(this.overlayKey,!1),this.goalKey=u+"_"+a,this.expanded=this.setDefaultExpandedState(c),this.completionOverlay&&m&&!this.overlayDismissed&&this.showCompletedOverlay()}return t(e,[{key:"isExpanded",value:function(){return this.expanded}},{key:"setDefaultExpandedState",value:function(e){var t="fallback",i=s["default"].get(this.goalKey,t);return i!==t?i:Boolean(e)}},{key:"toggleExpandedState",value:function(){this.locked||(this.expanded=!this.expanded,s["default"].set(this.goalKey,this.expanded))}},{key:"addTask",value:function(e,t){this.tasks[e]=new o["default"](e,t)}},{key:"isChecked",value:function(e){return this.tasks[e]&&this.tasks[e].checked}},{key:"isDismissed",value:function(e){return this.tasks[e]&&this.tasks[e].dismissed}},{key:"isCollapsed",value:function(e){return this.tasks[e]&&this.tasks[e].collapsed}},{key:"allChecked",value:function(){var e=this;return Object.keys(this.tasks).reduce(function(t,i){return t&&(e.isChecked(i)||e.isDismissed(i))},!0)}},{key:"dismissGoal",value:function(){var e=this;this.$node.slideUp(300),r["default"].post((0,k.dismiss_goal)(this.id).html).fail(function(){Shopify.Flash.error("Something went wrong."),e.$node.slideDown(300)})}},{key:"tasksCompleted",value:function(){var e=this;return Object.keys(this.tasks).reduce(function(t,i){return t+e.isChecked(i)},0)}},{key:"numTasks",value:function(){var e=this;return Object.keys(this.tasks).reduce(function(t,i){return t+!e.isDismissed(i)},0)}},{key:"status",value:function(){return this.allChecked()?"COMPLETED":this.tasksCompleted()+" of "+this.numTasks()}},{key:"showDismiss",value:function(){return this.allChecked()||this.shopUnlocked}},{key:"showTaskUndo",value:function(e){return this.tasks[e].dismissed}},{key:"checkGoalCompletion",value:function(){this.completionOverlay&&this.allChecked()&&!this.overlayDismissed&&this.showCompletedOverlay()}},{key:"hideCompletedOverlay",value:function(){this.overlayShown=!1,this.overlayDismissed=!0,s["default"].set(this.overlayKey,this.overlayDismissed)}},{key:"showCompletedOverlay",value:function(){this.expanded=!0,this.overlayShown=!0}},{key:"toggleState",value:function(e,t){var i=this,n=this.tasks[e];n.checked=t.target.checked,t.target.checked?r["default"].post((0,k.check_goal_task)().html,{task_handle:e}).success(function(){i.checkGoalCompletion()}).fail(function(){n.revertCheckedState()}):r["default"].post((0,k.uncheck_goal_task)().html,{task_handle:e}).fail(function(){n.revertCheckedState()})}},{key:"dismissTask",value:function(e){var t=this;this.tasks[e].dismissed=!0,r["default"].post((0,k.dismiss_goal_task)().html,{task_handle:e}).success(function(){t.checkGoalCompletion()})}},{key:"undoDismissTask",value:function(e){this.tasks[e].dismissed=!1,r["default"].post((0,k.undo_dismiss_goal_task)().html,{task_handle:e})}},{key:"collapseTask",value:function(e){this.tasks[e].collapsed=!0}},{key:"lockNavigation",value:function(){this.locked&&this.lockUrl&&!Shopify.Browser.isMobile()&&(document.location=this.lockUrl)}}]),e}();a["default"]=d,Shopify.Goal=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n($),o="dismiss_show_feed_button",s=function(){function e(t,n){var a=n.requestId;i(this,e),this.cardConsumptionRequestId=a,this.$feedNode=(0,r["default"])(".skeleton-feed"),this.$node=(0,r["default"])(t)}return t(e,[{key:"dismissShowFeedButton",value:function(){var e=this;this.$node.addClass("is-loading").attr("disabled",!0),r["default"].ajax({type:"DELETE",url:"/admin/dismissible_element?"+r["default"].param({handle:o}),success:function(){var t=new Shopify.Skeleton,i=Shopify.Home,n=new Shopify.CardConsumption({requestId:e.cardConsumptionRequestId});n.cleanup(),i.initialize(),t.loadHomeFeed().then(function(){return e.$feedNode.removeClass("hide"),i.onFeedLoaded(),e.$node.addClass("hide"),n.watch(),!0})["catch"](function(){e.$node.removeClass("disabled is-loading").attr("disabled",!0),Shopify.Flash.error("Something went wrong.")})}})}}]),e}();a["default"]=s,Shopify.FeedVisibility=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";function r(e,t){var i=e.clone().startOf(t),n=e.clone().endOf(t),a=f;return i.month()===n.month()&&(a=p),i.format(f)+"\u2013"+n.format(a)}Object.defineProperty(a,"__esModule",{value:!0});var s=n(moment),d=n(Twine),h=o(E),c=o(O),f="MMM D",p="D",m=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"today";i(this,e),this.onDateChanged=this.onDateChanged.bind(this),this.selectedDate=n,u.rootDispatcher.register(this.constructor.DATE_CHANGED_EVENT,this.onDateChanged).bindToNode(t),this._initFormattedDates(),this._updateLabel()}return t(e,[{key:"changeDate",value:function(e){return u.rootDispatcher.dispatch({type:this.constructor.DATE_CHANGED_EVENT,data:e})}},{key:"onDateChanged",value:function(e){var t=!0,i=e.data.split(","),n=l(i,2);return n[0]===n[1]&&(t=this.selectedDate===e.data),this.selectedDate=e.data,this._updateLabel(),t&&u.Popover.deactivate(),d["default"].refresh()}},{key:"_updateLabel",value:function(){if(-1===this.selectedDate.indexOf(","))this.dateLabel=c.titleize(this.selectedDate,!0);else{var e=this.selectedDate.split(","),t=l(e,2),i=t[0],n=t[1];if(this.dateLabel=h.fromShop((0,s["default"])(i)).formatInShop(f),i===n)return;(0,s["default"])(i).month()===(0,s["default"])(n).month()?this.dateLabel+="\u2013"+h.fromShop((0,s["default"])(n)).formatInShop(p):this.dateLabel+="\u2013"+h.fromShop((0,s["default"])(n)).formatInShop(f)}}},{key:"_initFormattedDates",value:function(){var e=h.nowShop().moment;this.formatted={today:e.format(f),yesterday:e.clone().subtract(1,"days").format(f),this_week:r(e,"week"),this_month:r(e,"month")}}}]),e}();m.DATE_CHANGED_EVENT="home:sidebar:date-changed",a["default"]=m,Shopify.HomeSidebarDatepicker=null!=a["default"]?a["default"]:a})),I=e(function(e,d){"use strict";function h(e){return y.fromShop((0,p["default"])(e)).moment.clone()}function c(e){return y.nowShop().moment.clone().startOf(e)}function f(e){return y.nowShop().moment.clone().endOf(e)}Object.defineProperty(d,"__esModule",{value:!0});var p=n(moment),m=n(Shopify.SummaryReport),y=o(E),_=n(v),k=o(g),O=n(w),D="YYYY-MM-DD",T="MMM D",b="D",S=function(e){function n(e,t){i(this,n);var a=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return a.channelId=t.channelId,a.homeSidebar=t.homeSidebar,a.widgetViewName=t.widgetViewName,a.widgetErrorMessage=t.widgetErrorMessage,a._newDateSelected=a._newDateSelected.bind(a),a._newDateSelected({data:a.homeSidebar.initialDate}),a.ready=!0,a.URL_REGEX=/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/,u.rootDispatcher.register(O["default"].DATE_CHANGED_EVENT,a._newDateSelected).bindToNode(e),a}return a(n,e),t(n,[{key:"changeChannelProvider",value:function(e){var t;this.homeSidebar.setActiveChannel(e.data);for(var i=arguments.length,a=Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];(t=s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"changeChannelProvider",this)).call.apply(t,[this,e].concat(a))}},{key:"formatNumber",value:function(e){return k.withDelimiter(e)}},{key:"formatMoney",value:function(e){return _["default"].format(e,_["default"].moneyUnencodedFormat())}},{key:"formatMoneyCondensed",value:function(e){var t=void 0;return e>=0?_["default"].condensed(e,_["default"].moneyUnencodedFormat()):(t=Math.abs(e),"\u2212"+(t=_["default"].condensed(t,_["default"].moneyUnencodedFormat())))}},{key:"formatLink",value:function(e){return 0!==e.indexOf("https://")&&0!==e.indexOf("http://")?e:e.substring(e.indexOf("/")+2)}},{key:"formatDate",value:function(e){var t=y.nowShop().moment,i=void 0,n=void 0;switch(e){case"today":return t.format(T);case"yesterday":return t.clone().subtract(1,"day").format(T);case"this_week":n=c("week"),i=f("week");break;case"this_month":n=c("month"),i=f("month");break;default:var a=e.split(","),r=l(a,2),o=r[0],s=r[1];n=h(o),i=h(s)}return n.isSame(i)?""+n.format(T):n.month()===i.month()?n.format(T)+"\u2013"+i.format(b):n.format(T)+"\u2013"+i.format(T)}},{key:"_load",value:function(){if(this.ready&&this.homeSidebar.isActive(this.channelId)){for(var e,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];(e=s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_load",this)).call.apply(e,[this].concat(i))}}},{key:"_newDateSelected",value:function(e){switch(this.homeSidebar.setActiveDate(e.data,this.formatDate(e.data)),e.data){case"today":return this.changeDateRange({data:{startDate:"0d",endDate:"0d"}});case"yesterday":return this.changeDateRange({data:{startDate:"-1d",endDate:"-1d"}});case"this_week":return this.changeDateRange({data:{startDate:c("week").format(D),endDate:f("week").format(D)}});case"this_month":return this.changeDateRange({data:{startDate:c("month").format(D),endDate:f("month").format(D)}});default:var t=e.data.split(","),i=l(t,2),n=i[0],a=i[1];return this.changeDateRange({data:{startDate:n,endDate:a}})}}}]),n}(m["default"]);d["default"]=S,Shopify.HomeSidebarReport=null!=d["default"]?d["default"]:d}),R=e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(_),u=n(I),d=o(g),h=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Unknown'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\n         BY referrer_host\n         FROM visits\n         WHERE referrer_source == 'Unknown'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data[0][0],n=e[1].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var a=n.map(function(e){return{referrerURL:function(){return null==e[0].match(t.URL_REGEX)?undefined:"http://"+t.formatLink(e[0])}(),referrerName:t.formatLink(e[0]),referrerCount:d.condensed(e[1]),percentage:t._formatPercentage(e[1]/i)}}),r=a.filter(function(e){return"0%"!==e.percentage});this.append(this.resultTemplate,{referrers:r})}},{key:"_formatPercentage",value:function(e){return Math.floor(100*e)+"%"}}]),n}(u["default"]);s["default"]=h,h.prototype.renderError=l["default"].noop,Shopify.HomeTopReferrersReport=null!=s["default"]?s["default"]:s}),M=(e(function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=n(R),l=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalEmbeds:"SHOW total_visitors\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topEmbeds:"SHOW total_visitors BY embedded_path\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_visitors DESC\n         LIMIT 3"}}}]),n}(s["default"]);o["default"]=l,Shopify.HomeBuyButtonTopEmbedLinksReport=null!=o["default"]?o["default"]:o}),e(function(e,s){"use strict";function l(e,t){var i="sales"===t?"order":"view";return d.condensed(e)+" "+c.pluralize(e,i)}Object.defineProperty(s,"__esModule",{value:!0});var u=n(I),d=o(g),h=n(v),c=o(O),f=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{topProducts:"SHOW gross_sales, total_quantity\n         BY product_id, product_title, variant_title\n         FROM sales\n         "+this.queryProps.channelFilter+" "+(this.queryProps.channelFilter?"AND":"WHERE")+" sale_line_type == 'product'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_quantity DESC\n         LIMIT 3"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var n=i.map(function(e,n){return{id:e[0],name:e[1],variant:"Default Title"===e[2]?null:e[2],sales:h["default"].format(e[3],h["default"].moneyUnencodedFormat()),metric:l(e[4],t.widgetViewName),isLastEntry:n===i.length-1}});this.append(this.resultTemplate,{products:n})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),n}(u["default"]);s["default"]=f,Shopify.HomeTopProductsReport=null!=s["default"]?s["default"]:s})),L=e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n($),u=n(M),d=o(k),h=o(g),c=function(e){function n(e,t){i(this,n);var a=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return a.channelId=t.channelId,a.channelName=t.channelName,a.homeSidebar=t.homeSidebar,a.widgetViewName=t.widgetViewName,a.queryProps.channelName=a.channelName,a}return a(n,e),t(n,[{key:"queries",value:function(){return{topProducts:"SHOW total_views BY product_id\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_views DESC\n         LIMIT 3"}}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var n=i.map(function(e){return e[0]});this._loadProductTitles(n).then(function(e){return i.map(function(t,n){return{id:t[0],views:h.condensed(t[1]),name:e[t[0]],isLastEntry:n===i.length-1}})}).then(function(e){return t.append(t.resultTemplate,{products:e})}).fail(this.renderError.bind(this))}},{key:"_loadProductTitles",value:function(e){return l["default"].ajax({url:d.products().json+"?ids="+e.join(",")+"&fields=id,title",type:"GET",dataType:"json"}).then(function(e){var t={};return e.products.forEach(function(e){t[e.id]=e.title}),t})}}]),n}(u["default"]);s["default"]=c,Shopify.HomeTopViewedProductsReport=null!=s["default"]?s["default"]:s}),H=(e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(L),u=o(g),d=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{topProducts:"SHOW total_visitors BY product_id\n         FROM buy_button_impression\n         WHERE product_id != 0\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_visitors DESC\n         LIMIT 3"}}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var n=i.map(function(e){return e[0]});this._loadProductTitles(n).then(function(e){return i.map(function(t,n){return{id:t[0],views:u.condensed(t[1]),name:e[t[0]],isLastEntry:n===i.length-1}})}).then(function(e){return t.append(t.resultTemplate,{products:e})}).fail(this.renderError.bind(this))}}]),n}(l["default"]);s["default"]=d,Shopify.HomeBuyButtonTopViewedProductsReport=null!=s["default"]?s["default"]:s}),e(function(e,t){"use strict";function i(e,t){var i=Math.abs(t-e);if(e<0){i*=1+1/k.yAxisTickCount}var n=i/(k.yAxisTickCount-1);n=r(n,s(n)/2,i);var a=Math.ceil(Math.abs(e)/n);return(0,v["default"])({from:0,to:k.yAxisTickCount,inclusive:!1}).map(function(e,t){return(t-a)*n}).reverse()}function a(e,t){return e.map(function(e,i){return{value:t(e),visible:i%2==0}})}function r(e,t,i){var n=Math.floor(i);if(n<=k.yAxisRange.small)return k.yAxisStepInterval.small;if(n<=k.yAxisRange.medium)return k.yAxisStepInterval.medium;var a=Math.ceil(e),r=a%t,o=Math.round(a+t-r);return Math.max(o,k.yAxisStepInterval.large)}function s(e){return Math.pow(10,Math.ceil(e).toString().length-1)}function u(e){function t(e,t){var i=l(t,2),n=(i[0],i[1]);return Math.min(e,n)}return Math.min(0,e.reduce(t,0))}function d(e){function t(e,t){var i=l(t,2),n=(i[0],i[1]);return Math.max(e,n)}return Math.max(0,e.reduce(t,0))}function h(e){var t="hour"===e.columns[0].field,i=O.day;return t&&(i+=" "+O.hour),{tooltipDateFormat:i,xAxisDateFormat:t?O.hour:O.dayCondensed}}function c(e){return e>k.removeSpacingBreakpoint?0:e>k.reduceSpacingBreakpoint?1:Math.max(Math.floor(k.reduceSpacingBreakpoint/e),2)}function f(e,t){var i=Math.abs(e)/t*k.height;return Math.round(Math.max(i,k.minBarHeight))}function p(e,t){var i=Math.round(100*e/t);return i=Math.max(i,k.minTooltipPositionPercent),i=Math.min(i,k.maxTooltipPositionPercent)}function m(e){var t=[0,e-1];if(e>=7)t.push(Math.floor(Number(e)/3)),t.push(Math.floor(2*e/3));else{var i=!0,n=!1,a=undefined;try{for(var r,o=(0,v["default"])({from:1,to:e-2,inclusive:!0})[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var s=r.value;t.push(s)}}catch(e){n=!0,a=e}finally{try{!i&&o["return"]&&o["return"]()}finally{if(n)throw a}}}return t}Object.defineProperty(t,"__esModule",{value:!0});var y=n(_),v=n(D),g=o(E),k={height:101,minBarHeight:2,minGraphHeight:10,minTooltipPositionPercent:10,maxTooltipPositionPercent:90,fixXAxisBreakpoint:20,reduceSpacingBreakpoint:40,removeSpacingBreakpoint:90,yAxisTickCount:6,yAxisNoDataStepHeight:1,yAxisLowDataStepHeight:2,yAxisStepInterval:{small:1,medium:2,large:5},yAxisRange:{small:5,medium:10}},O={day:"MMMM D, YYYY",dayCondensed:"MMM D",hour:"ha"};t["default"]=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=void 0;if(!(t=e.dataFormatters))throw new Error("HomeGraphHelper requires dataFormatters to format values and the y-axis.");return function(n){var r=n.data.length,o=k.height/(k.yAxisTickCount-1),s=i(u(n.data),d(n.data)),_=s[0],v=y["default"].last(s),E=_-v,O={type:e.type||"sales",hasManyPoints:r>k.fixXAxisBreakpoint,barSpacing:c(r),bars:[],originPosition:Math.round(s.indexOf(0)*o),xAxis:[],yAxis:a(s,t.formatYAxisValue)},D=g.nowShop().moment,T=h(n),b=T.tooltipDateFormat,S=T.xAxisDateFormat;return n.data.forEach(function(e,i){var n=l(e,3),a=n[0],o=n[1],s=n[2],u=void 0,d=void 0,h=g.fromShop(a).moment.isAfter(D);return h||(d={date:g.fromShop(a).moment.format(b),horizontalPosition:p(i,r),primaryValue:t.formatPrimaryValue(o)},t.formatSecondaryValue&&(d.secondaryValue=t.formatSecondaryValue(s))),O.bars.push({rawValue:o,height:f(o,E),tooltip:d,inFuture:h}),m(r).includes(i)&&(u=g.fromShop(a).moment.format(S)),O.xAxis.push(u||"")}),O}},Shopify.HomeGraphTransformer=null!=t["default"]?t["default"]:t})),F=(e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(I),u=n(H),d=o(g),h=o(O),c=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day";return{visits:"SHOW total_sessions, total_visitors\n         OVER "+t+"(viewed_at)\n         AS "+t+"\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+t+" ASC",totalVisits:"SHOW total_sessions\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var e=this,t={formatPrimaryValue:function(t){return e.formatNumber(t)+" "+h.pluralize(t,"visit")},formatSecondaryValue:function(t){return e.formatNumber(t)+" visitors"},formatYAxisValue:function(e){return d.condensed(e)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[1].result.data,i=e[2].result.data;i?this.append(this.resultTemplate,{visits:d.withDelimiter(t),visitors:d.withDelimiter(i),graph:this.transformGraphData(e[0].result)}):this.append(this.noDataTemplate)}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),n}(l["default"]);s["default"]=c,Shopify.HomeBuyButtonVisitorsReport=null!=s["default"]?s["default"]:s}),e(function(e,s){"use strict";function d(e){e.stopPropagation()}Object.defineProperty(s,"__esModule",{value:!0});var h=n(Twine),c=n(_),f=n($),p=n(I),m=o(g),y=n(v),E=n(Shopify.SummaryReportChannelpicker),k=o(O),D="2",T=function(e){function n(e,t){i(this,n);var a=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return a.channels=t.channels.filter(function(e){return"All channels"!==e.name}),a.displayDashboardLink=t.displayDashboardLink,a}return a(n,e),t(n,[{key:"queries",value:function(){var e=this,t={};return this.channels.forEach(function(i){return t[i.name+"-"+i.id]=e._salesAndOrdersQuery(i.id),t[i.name+"-"+i.id]}),t}},{key:"initializeView",value:function(){(0,f["default"])(".page__sidebar").on("click",".home-channel-summary__link",d),this.resultTemplate=this.createTemplate(".js-template-success"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=this,i={};this.channels.forEach(function(n,a){var r=l(e[a].result.data[0],2),o=r[0],s=r[1];n.id[0]===D&&(n.name=t._formatChannelDisplayName(n)),i[n.name+"-"+n.id]=c["default"].assign(n,{sales:""+t._formatMoney(o),orders:t._formatNumber(s)+" "+k.pluralize(s,"order")})});var n=this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,channels:i,displayDashboardLink:this.displayDashboardLink});h["default"].bind(n.find(".js-button-wrapper")[0])}},{key:"changeChannel",value:function(e){u.rootDispatcher.dispatch({type:E["default"].CHANNEL_CHANGED_EVENT,data:e})}},{key:"_salesAndOrdersQuery",value:function(e){var t=e.split("-"),i=l(t,2),n=i[0],a=i[1],r="WHERE channel_provider_id == "+n;return a&&(r+=" AND location_id == "+a),'\n       SHOW\n         total_sales AS "sales '+e+'",\n         total_orders AS "orders '+e+'"\n       FROM sales\n       '+r+"\n       SINCE "+this.queryProps.startDate+"\n       UNTIL "+this.queryProps.endDate}},{key:"_formatMoney",value:function(e){return y["default"].format(e,y["default"].moneyUnencodedFormat())}},{key:"_formatNumber",value:function(e){return m.condensed(e)}},{key:"_formatChannelDisplayName",value:function(e){return e.name.replace(/Point of sale/,"Shopify POS")}}]),n}(p["default"]);s["default"]=T,T.prototype.renderError=c["default"].noop,Shopify.HomeChannelsSummaryReport=null!=s["default"]?s["default"]:s}),e(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(I),s=function(e){function t(e,n){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.channelId=n.channelId,a.channelName=n.channelName,a.homeSidebar=n.homeSidebar,a.queryProps.channelName=a.channelName,a}return a(t,e),t}(o["default"]);t["default"]=s,Shopify.HomeSidebarEngagementsReport=null!=t["default"]?t["default"]:t})),V=e(function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=n(F),u=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{views:'SHOW total_views, total_clicks\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == "'+this.queryProps.channelName+'"\n         SINCE '+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalPurchased:'SHOW total_orders\n         FROM sales\n         WHERE api_client_title == "'+this.queryProps.channelName+'"\n         SINCE '+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=l(e[0].result.data[0],2),i=t[0],n=t[1],a=e[1].result.data[0][0];if(0===i)return void this.append(this.noDataTemplate);var r={reachedCheckout:n.toLocaleString(),reachedCheckoutPercentage:this._formatPercentage(n/i),purchased:a.toLocaleString(),purchasedPercentage:this._formatPercentage(a/i)};this.append(this.resultTemplate,r)}},{key:"renderError",value:function(){this.append(this.errorTemplate)}},{key:"_formatPercentage",value:function(e){return(100*e).toFixed(2)+"%"}}]),n}(s["default"]);o["default"]=u,Shopify.HomeConversionReport=null!=o["default"]?o["default"]:o}),x=(e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(_),u=n(I),d=o(g),h=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalMarketingCampaigns:"SHOW total_sessions\n         FROM visits\n         WHERE utm_campaign_name != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topMarketingCampaigns:"SHOW total_sessions\n         BY utm_campaign_name\n         FROM visits\n         WHERE utm_campaign_name != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data[0][0],n=e[1].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var a=n.map(function(e){return{referrerName:e[0],referrerCount:d.condensed(e[1]),percentage:t._formatPercentage(e[1]/i)}});this.append(this.resultTemplate,{referrers:a})}},{key:"_formatPercentage",value:function(e){return Math.floor(100*e)+"%"}}]),n}(u["default"]);s["default"]=h,h.prototype.renderError=l["default"].noop,Shopify.HomeMarketingCampaignsReport=null!=s["default"]?s["default"]:s}),e(function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=n(V),u=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{sessionsFunnel:"SHOW total_sessions, total_carts, total_reached_checkouts\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalPurchased:"SHOW total_orders\n         FROM sales\n         WHERE api_client_title == 'Online Store'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"renderResult",value:function(e){var t=l(e[0].result.data[0],3),i=t[0],n=t[1],a=t[2],r=e[1].result.data[0][0];if(0===i)return void this.append(this.noDataTemplate);var o={addsToCart:n.toLocaleString(),addsToCartPercentage:this._formatPercentage(n/i),reachedCheckout:a.toLocaleString(),reachedCheckoutPercentage:this._formatPercentage(a/i),purchased:r.toLocaleString(),purchasedPercentage:this._formatPercentage(r/i)};this.append(this.resultTemplate,o)}}]),n}(s["default"]);o["default"]=u,Shopify.HomeOnlineStoreConversionReport=null!=o["default"]?o["default"]:o}),e(function(e,a){"use strict";function r(){return d["default"].get(p,c)}Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s=n(Twine),l=n(Shopify.SummaryReportChannelpicker),d=n(window.SafeLocalStorage),h="today",c="all",f="homeSidebarDate",p="homeSidebarChannel",m="cid",y=function(){function e(t,n){i(this,e),this._updateChannelPicker=this._updateChannelPicker.bind(this),this._initialShowEvent=this._initialShowEvent.bind(this),this._showPickers=this._showPickers.bind(this),this.setActiveChannel=this.setActiveChannel.bind(this),this.node=t;var a=n.map(function(e){return e.id});this.currentChannelId=this._getInitialChannelId(a),this.initialDate=d["default"].get(f,h),u.rootDispatcher.register(l["default"].AFTER_CHANNEL_CHANGED_EVENT,this._initialShowEvent),setTimeout(this._updateChannelPicker,0)}return t(e,[{key:"setActiveDate",value:function(e,t){this.formattedDate=t,d["default"].set(f,e)}},{key:"setActiveChannel",value:function(e){this.currentChannelId=e,d["default"].set(p,this.currentChannelId)}},{key:"isActive",value:function(e){return e===this.currentChannelId}},{key:"_updateChannelPicker",value:function(){this._setChannelPickerLabel()}},{key:"_setChannelPickerLabel",value:function(){u.rootDispatcher.dispatch({type:l["default"].CHANNEL_CHANGED_EVENT,data:this.currentChannelId})}},{key:"_initialShowEvent",value:function(e){e.data===this.currentChannelId&&(s["default"].refresh(),this._showPickers(),u.rootDispatcher.remove(l["default"].CHANNEL_CHANGED_EVENT,this._initialShowEvent))}},{key:"_showPickers",value:function(){return(0,o["default"])(this.node).removeClass("next-card--home-channel-filters--loading")}},{key:"_getInitialChannelId",value:function(e){for(var t=[this._channeldIdFromUrl,r],i=0;i<t.length;i++){var n=t[i],a=n.call(this);if(-1!==e.indexOf(a))return a}return c}},{key:"_channeldIdFromUrl",value:function(){var e=this._urlParams().filter(function(e){return e.split("=")[0]===m})[0];if(e){var t=e.split("=")[1];return decodeURIComponent(t)}return null}},{key:"_urlParams",value:function(){return window.location.search.substring(1).split("&")}}]),e}();a["default"]=y,Shopify.HomeSidebar=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n(moment),o=n(_),s=n($),d=n(T),h=n(D),c=n(w),f="MMMM YYYY",p="e",m="YYYY-MM-DD",y=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],v=function(){function e(t,n){i(this,e),this.$calendar=(0,s["default"])(t).find(".js-home-calendar"),this._initTemplate(t),this._initEvents(t),this._loadDateRange({data:n.selectedDate})}return t(e,[{key:"nextMonth",value:function(){return this._loadMonthFor(this.lastOfMonth.add(1,"day"))}},{key:"prevMonth",value:function(){return this._loadMonthFor(this.firstOfMonth.subtract(1,"day"))}},{key:"_initTemplate",value:function(e){var t=(0,s["default"])(e).find(".js-template-calendar").remove()
;return this.template=o["default"].template(t.html()),this.template}},{key:"_initEvents",value:function(e){var t=this;u.rootDispatcher.register(c["default"].DATE_CHANGED_EVENT,this._loadDateRange.bind(this)).bindToNode(e),this.$calendar.on("click",".btn",this._dateClicked.bind(this)),d["default"].onReplace(e,function(){return t.$calendar.off("click")})}},{key:"_loadDateRange",value:function(e){var t=e.data,i=(0,r["default"])().startOf("day");switch(t){case"today":this.fromMoment=i,this.toMoment=i;break;case"yesterday":this.fromMoment=i.clone().subtract(1,"day"),this.toMoment=i.clone().subtract(1,"day");break;case"this_week":this.fromMoment=i.clone().startOf("week"),this.toMoment=i.clone().endOf("week").startOf("day");break;case"this_month":this.fromMoment=i.clone().startOf("month"),this.toMoment=i.clone().endOf("month").startOf("day");break;default:var n=t.split(","),a=l(n,2),o=a[0],s=a[1];this.fromMoment=(0,r["default"])(o),this.toMoment=(0,r["default"])(s)}return this._loadMonthFor(this.fromMoment)}},{key:"_render",value:function(e){var t={weeks:e,monthName:this.monthName,DAYS_OF_THE_WEEK:y};return this.$calendar.empty(),this.$calendar.append(this.template(t))}},{key:"_dateClicked",value:function(e){e.stopPropagation();var t=e.target.innerHTML.trim(),i=(0,r["default"])(new Date(this.firstOfMonth.year(),this.firstOfMonth.month(),t));return this.toMoment.isSame(this.fromMoment)&&i.isSame(this.toMoment)?this._updateDatepicker():this.toMoment.isSame(this.fromMoment)&&i.isAfter(this.fromMoment)?(this.toMoment=i,this._updateDatepicker()):(this.fromMoment=i,this.toMoment=i,this._updateDatepicker())}},{key:"_updateDatepicker",value:function(){var e=this.fromMoment.format(m)+",";return e+=""+this.toMoment.format(m),u.rootDispatcher.dispatch({type:c["default"].DATE_CHANGED_EVENT,data:e})}},{key:"_loadMonthFor",value:function(e){var t=[],i={},n=0;this.firstOfMonth=e.clone().startOf("month"),this.lastOfMonth=e.clone().endOf("month");var a=this.firstOfMonth.format(p);for(this.monthName=e.format(f);n<a;)i[y[n]]={date:""},n++;var r=!0,o=!1,s=undefined;try{for(var l,u=(0,h["default"])({from:1,to:this.lastOfMonth.date(),inclusive:!0})[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var d=l.value,c=this.firstOfMonth.clone().add(d-1,"days");i[y[n]]=this._dateWithMetadata(c),n++,7===n&&(n=0,t.push(i),i=d===this.lastOfMonth.date()?null:{})}}catch(e){o=!0,s=e}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw s}}if(i){for(;n<7;)i[y[n]]={date:""},n++;t.push(i)}return this._render(t)}},{key:"_dateWithMetadata",value:function(e){return{date:e.date(),isStart:e.isSame(this.fromMoment),isEnd:e.isSame(this.toMoment),isSelected:e.isAfter(this.fromMoment)&&e.isBefore(this.toMoment)}}}]),e}();a["default"]=v,Shopify.HomeSidebarCalendar=null!=a["default"]?a["default"]:a}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(_),u=n(I),d=o(g),h=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topCountries:"SHOW total_sessions\n         BY location_country\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data[0][0],n=e[1].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var a=n.map(function(e){return{referrerName:e[0]||"Unknown",referrerCount:d.condensed(e[1]),percentage:t._formatPercentage(e[1]/i)}}),r=a.filter(function(e){return"0%"!==e.percentage});this.append(this.resultTemplate,{referrers:r})}},{key:"_formatPercentage",value:function(e){return Math.floor(100*e)+"%"}}]),n}(u["default"]);s["default"]=h,h.prototype.renderError=l["default"].noop,Shopify.HomeTopCountriesReport=null!=s["default"]?s["default"]:s}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(_),u=n(I),d=o(g),h=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,landingPages:"SHOW total_sessions\n         BY page_path, host(page_url)\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data[0][0],n=e[1].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var a=n.map(function(e){return{referrerURL:"http://"+e[1]+e[0],referrerName:t.formatLink(e[0])||"Frontpage ("+t.formatLink(e[1])+")",referrerCount:d.condensed(e[2]),percentage:t._formatPercentage(e[2]/i)}}),r=a.filter(function(e){return"0%"!==e.percentage});this.append(this.resultTemplate,{referrers:r})}},{key:"_formatPercentage",value:function(e){return Math.floor(100*e)+"%"}}]),n}(u["default"]);s["default"]=h,h.prototype.renderError=l["default"].noop,Shopify.HomeTopLandingPagesReport=null!=s["default"]?s["default"]:s}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(_),u=n(I),d=o(g),h=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Search'\n         AND referrer_terms != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topSearchTerms:"SHOW total_sessions\n         BY referrer_terms\n         FROM visits\n         WHERE referrer_source == 'Search'\n         AND referrer_terms != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data[0][0],n=e[1].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var a=n.map(function(e){return{referrerName:t.formatLink(e[0]),referrerCount:d.condensed(e[1]),percentage:t._formatPercentage(e[1]/i)}}),r=a.filter(function(e){return"0%"!==e.percentage});this.append(this.resultTemplate,{referrers:r})}},{key:"_formatPercentage",value:function(e){return Math.floor(100*e)+"%"}}]),n}(u["default"]);s["default"]=h,h.prototype.renderError=l["default"].noop,Shopify.HomeTopSearchReferrersReport=null!=s["default"]?s["default"]:s}),e(function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=n(R),l=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Social'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\n         BY referrer_name\n         FROM visits\n         WHERE referrer_source == 'Social'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}}]),n}(s["default"]);o["default"]=l,Shopify.HomeTopSocialReferrersReport=null!=o["default"]?o["default"]:o}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(I),u=n(v),d=o(g),h="Point of Sale",c=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.channelId.split("-")[1];return{topStaff:"SHOW total_orders, total_sales\n         BY employee_id, employee_name\n         FROM sales\n         WHERE api_client_title == '"+h+"'\n         AND location_id == "+e+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_orders DESC\n         LIMIT 3"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[0].result.data;if(!t.length)return void this.append(this.noDataTemplate);var i=t.map(function(e,i){return{id:e[0],name:e[1],orderCount:d.condensed(e[2]),totalSales:u["default"].format(e[3],u["default"].moneyUnencodedFormat()),average:e[2]?"$"+u["default"].formatWithDelimiters(e[3]/e[2]):"$0.00",isLastEntry:i===t.length-1}});this.append(this.resultTemplate,{staffMembers:i})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),n}(l["default"]);s["default"]=c,Shopify.HomeTopStaffReport=null!=s["default"]?s["default"]:s}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(F),u=n(H),d=o(g),h=o(O),c=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{views:"SHOW total_views\n         OVER day(occurred_on)\n         AS day\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY day ASC",totalViews:"SHOW total_views\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var e=this,t={formatPrimaryValue:function(t){return e.formatNumber(t)+" "+h.pluralize(t,"view")},formatYAxisValue:function(e){return d.condensed(e)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[0].result;if(!t.data.length)return void this.append(this.noDataTemplate);var i=d.withDelimiter(e[1].result.data[0][0]),n=h.pluralize(i,"view");this.append(this.resultTemplate,{views:i+" "+n,graph:this.transformGraphData(t)})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),n}(l["default"]);s["default"]=c,Shopify.HomeViewsReport=null!=s["default"]?s["default"]:s}));e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(x),u=n(H),d=o(g),h=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day";return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,visits:"SHOW total_sessions, total_visitors\n         OVER "+t+"(timestamp)\n         AS "+t+"\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+t+" ASC"}}},{key:"initializeView",value:function(){var e=this,t={formatPrimaryValue:function(t){return e.formatNumber(t)+" visits"},formatSecondaryValue:function(t){return e.formatNumber(t)+" visitors"},formatYAxisValue:function(e){return d.condensed(e)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[0].result.data,i=e[1].result.data;if(!i)return void this.append(this.noDataTemplate);this.append(this.resultTemplate,{visits:d.withDelimiter(t),visitors:d.withDelimiter(i),graph:this.transformGraphData(e[2].result)})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),n}(l["default"]);s["default"]=h,Shopify.HomeOnlineStoreVisitorsReport=null!=s["default"]?s["default"]:s}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(I),u=n(v),d=o(O),h=o(g),c=n(H),f=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day";return{sales:"SHOW total_sales\n         OVER "+t+"(processed_at)\n         AS "+t+"\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+t+" ASC",totalSalesAndOrders:"SHOW total_sales, total_orders\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var e=this,t={formatPrimaryValue:function(t){return e.formatMoney(t)},formatYAxisValue:function(t){return e.formatMoneyCondensed(t)}};this.transformGraphData=new c["default"]({dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[0].result;if(!t.data.length)return void this.append(this.noDataTemplate);var i=e[1].result,n=h.withDelimiter(i.data[0][1]),a=d.pluralize(i.data[0][1],"order");this.append(this.resultTemplate,{total:u["default"].format(i.data[0][0],u["default"].moneyUnencodedFormat()),orders:n+" "+a,graph:this.transformGraphData(t)})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),n}(l["default"]);s["default"]=f,Shopify.HomeSalesReport=null!=s["default"]?s["default"]:s}),e(function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=n(I),u=n(v),d=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day";return{totalSalesBreakdown:'SHOW\n           total_sales,\n           orders,\n           sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "order") THEN amount_after_discounts_after_tax)) AS order_sales,\n           sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "return") THEN amount_after_discounts_after_tax)) AS returns_amount,\n           count(DISTINCT (IF (sale_kind == "return") THEN order_id)) AS returns_count\n         OVER '+t+"(processed_at)\n         AS "+t+"\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+t+" ASC"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success")}},{key:"renderResult",value:function(e){var t=e[0].result;if(!t.data.length)return void this.$node.hide();var i=l(t.summary,6),n=i[1],a=i[3],r=i[4];i[5]>0?(this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,totalSales:u["default"].format(n,u["default"].moneyUnencodedFormat()),sales:u["default"].format(a,u["default"].moneyUnencodedFormat()),returnsAmount:u["default"].format(r,u["default"].moneyUnencodedFormat())}),this.$node.show()):this.$node.hide()}},{key:"renderError",value:function(){this.$node.hide()}}]),n}(s["default"]);o["default"]=d,Shopify.HomeTotalSalesBreakdown=null!=o["default"]?o["default"]:o});(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Shopify.SocialMarketingFrame=function(){function t(t,i){this.node=t,this.url=i,this.receive=e(this.receive,this),this.show=e(this.show,this),this.onLoad=e(this.onLoad,this),this.context=Twine.context(document.body),Shopify.rootDispatcher.register("SocialMarketingFrameOpen",this.show).bindToNode(this.node),window.addEventListener("message",this.receive)}return t.prototype.loaded=!1,t.prototype.onLoad=function(e){return""!==e.target.src&&(this.loaded=!0),Twine.refresh()},t.prototype.show=function(e){return null==e&&(e={}),null!=e.url?this.src=e.url:this.src=this.url,e.funnel&&(this.src=Shopify.UrlMangler.addQuery(Shopify.UrlMangler.getURL(this.src),{funnel:e.funnel})),Twine.refresh(),this.context.SocialMarketingModal.show()},t.prototype.receive=function(e){var t,i;try{t=JSON.parse(e.data)}catch(e){return}return t.closeMarketingModal&&(this.context.SocialMarketingModal.hide(),this.src="",this.loaded=!1),t.marketingFrameHeight&&(i=window.innerHeight-40,this.height=t.marketingFrameHeight<i?t.marketingFrameHeight:i),Twine.refresh()},t}()}).call(this),function(){var e,t,i=function(e,t){return function(){return e.apply(t,arguments)}};e="a, input, button, [data-bind-event-click], [aria-haspopup], td.select, .ui-popover *",t=function(e){return"undefined"!=typeof Page&&null!==Page?Page.visit(e):location.href=e},Shopify.NestedLinkContainer=function(){function n(e){var t;this.node=e,this.linkTo=i(this.linkTo,this),t=$(this.node),this.href=t.find("a[data-nested-link-target]")[0].href,t.on("click",this.linkTo)}return n.BLACK_LIST=e,n.prototype.linkTo=function(i){if(!($(i.target).filter(e).length>0||this._hasSelection()))return t(this.href)},n.prototype._hasSelection=function(){return window.getSelection().toString().length>0},n}()}.call(this);(function(){var e,t,i,n,a,r,o,s,l,u,d=function(e,t){return function(){return e.apply(t,arguments)}};e={TYPE:"data-collapsible",STATE:"data-collapsible-state",MAX_WIDTH:"data-collapsible-maxwidth",HIDDEN:"aria-hidden",BTN:{TARGET:"data-collapsible-target",EXPANDED:"aria-expanded",TEXT:{EXPANDED:"data-collapsible-text--expanded",COLLAPSED:"data-collapsible-text--collapsed"},ICON:{EXPANDED:"data-collapsible-icon--expanded",COLLAPSED:"data-collapsible-icon--collapsed"}}},t={BTN:{TEXT:"btn__text",ICON:"icon"}},n="collapsible:collapsed",a="collapsible:expanded",o={},l=function(e){return o[e.id]},r={},s=function(t){return r[t.getAttribute(e.BTN.TARGET)]},Shopify.Collapsible=function(){function t(t){var i;this.node=t,this._finishTransition=d(this._finishTransition,this),this._getHeight=d(this._getHeight,this),this.node,this.id=this.node.id,this.id&&(this.collapsed="collapsed"===this.node.getAttribute(e.STATE),this.dismissible="dismissible"===this.node.getAttribute(e.TYPE),i=this.node.getAttribute(e.MAX_WIDTH),this.maxwidth=i?parseInt(i,10):void 0,this.activator=null,this._pairActivator(),this._toggleAtWidth(),this._trackWidthResize())}return t.DISPATCHER_COLLAPSED_ACTION=n,t.DISPATCHER_EXPANDED_ACTION=a,t._collapsibleRefs=o,t.getCollapsibleRefForNode=l,t._activatorRefs=r,t.getActivatorForNode=s,t.prototype.toggle=function(e){return null==e&&(e=!0),this.collapsed?this.expand(e):this.collapse(e)},t.prototype.expand=function(t){return null==t&&(t=!0),this.collapsed?(this.activator&&this.activator.expand(),t?(this.node.addEventListener("transitionend",this._finishTransition),this.node.classList.add("collapsible--has-transition"),this.node.style.height=this._getHeight(),this.node.offsetHeight,requestAnimationFrame(function(t){return function(){return t.collapsed=!1,t.node.setAttribute(e.STATE,"expanded"),t.node.setAttribute(e.HIDDEN,"false"),Shopify.rootDispatcher.dispatch(t._generateTransitionEvent())}}(this))):(this.collapsed=!1,this.node.setAttribute(e.STATE,"expanded"),this.node.setAttribute(e.HIDDEN,"false"),this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()))):this},t.prototype.collapse=function(t){return null==t&&(t=!0),this.collapsed?this:(this.activator&&this.activator.collapse(),t?(this.node.addEventListener("transitionend",this._finishTransition),this.node.classList.add("collapsible--has-transition"),this.node.style.height=this._getHeight(),this.node.offsetHeight,requestAnimationFrame(function(t){return function(){return t.collapsed=!0,t.node.setAttribute(e.STATE,"collapsed"),t.node.setAttribute(e.HIDDEN,"true"),Shopify.rootDispatcher.dispatch(t._generateTransitionEvent())}}(this))):(this.collapsed=!0,this.node.setAttribute(e.STATE,"collapsed"),this.node.setAttribute(e.HIDDEN,"true"),this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()),this.dismissible&&this.collapsed?this.remove():void 0))},t.prototype.remove=function(){this.activator&&this.activator.remove(),o[this.id]=null,this.node.parentNode.removeChild(this.node)},t.prototype._getHeight=function(){var e;return e=this.node.scrollHeight,e+=parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-bottom"),10),(e+=parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-top"),10))+"px"},t.prototype._finishTransition=function(e){if(e.target===this.node&&"height"===e.propertyName&&(this.node.removeEventListener("transitionend",this._finishTransition),this.node.classList.remove("collapsible--has-transition"),this.node.style.height=null,this.node.offsetHeight,this.activator.ready=!0,this.dismissible&&this.collapsed))return this.remove()},t.prototype._generateTransitionEvent=function(){return{type:this.collapsed?n:a,data:{collapsibleInstance:this}}},t.prototype._pairActivator=function(){var t;if(t=document.querySelector("["+e.BTN.TARGET+"='"+this.id+"']"))return r[this.id]=new i(t,this),this.activator=r[this.id]},t.prototype._toggleAtWidth=function(e){return null==e&&(e=!1),this.maxwidth&&(this.node.offsetWidth>=this.maxwidth?(this.collapsed&&this.expand(e),this.activator&&this.activator.hide()):this.activator&&this.activator.show()),this},t.prototype._trackWidthResize=function(){if(this.maxwidth)return window.addEventListener("resize",_.debounce(function(e){return function(){return requestAnimationFrame(function(){return e._toggleAtWidth()})}}(this),50))},t}(),i=function(){function i(i,n){var a,r;this.node=i,this.collapsible=n,this._clickToToggle=d(this._clickToToggle,this),this.node,this.collapsible,this.target=this.collapsible.node,this.collapsed="false"===this.node.getAttribute(e.BTN.EXPANDED),this.ready=!0,r=this.node.getElementsByClassName(t.BTN.TEXT)[0],this.text={node:r,expanded:r?r.getAttribute(e.BTN.TEXT.EXPANDED):void 0,collapsed:r?r.getAttribute(e.BTN.TEXT.COLLAPSED):void 0},a=this.node.getElementsByClassName(t.BTN.ICON)[0],this.icon={node:a,symbol:a?a.getElementsByTagName("use")[0]:void 0,expanded:a?a.getAttribute(e.BTN.ICON.EXPANDED):void 0,collapsed:a?a.getAttribute(e.BTN.ICON.COLLAPSED):void 0},this.node.addEventListener("click",this._clickToToggle)}return i._collapsibleRefs=o,i.getCollapsibleRefForNode=l,i._activatorRefs=r,i.getActivatorForNode=s,i.prototype.toggle=function(){return this.collapsed?this.expand():this.collapse()},i.prototype.expand=function(){return this.collapsed?(this.ready=!1,this.collapsed=!1,this.node.setAttribute(e.BTN.EXPANDED,"true"),this._toggleText(),this._toggleIcon(),this):this},i.prototype.collapse=function(){return this.collapsed?this:(this.ready=!1,this.collapsed=!0,this.node.setAttribute(e.BTN.EXPANDED,"false"),this._toggleText(),this._toggleIcon(),this)},i.prototype.remove=function(){this.node.removeEventListener("click",this._clickToToggle),r[this.node.getAttribute(e.BTN.TARGET)]=null,this.node.parentNode.removeChild(this.node)},i.prototype.hide=function(){this.node.classList.add("hide")},i.prototype.show=function(){this.node.classList.remove("hide")},i.prototype._toggleText=function(){return this.text.expanded&&this.text.collapsed&&(this.text.node.innerHTML=this.collapsed?this.text.collapsed:this.text.expanded),this},i.prototype._toggleIcon=function(){return this.icon.expanded&&this.icon.collapsed&&(this.collapsed?this.icon.symbol.setAttribute("xlink:href","#"+this.icon.collapsed):this.icon.symbol.setAttribute("xlink:href","#"+this.icon.expanded)),this},i.prototype._clickToToggle=function(e){if(this.ready)return e.preventDefault(),document.body.contains(this.target)?this.collapsible.toggle():void 0},i}(),u=function(){var t,i,n,a,r,s;for(r=document.querySelectorAll("["+e.TYPE+"]"),s=[],n=0,a=r.length;n<a;n++)t=r[n],i=t.id,i?s.push(o[i]=new Shopify.Collapsible(t)):s.push(console.log("This collapsible has been rejected because of missing ID!"));return s},$(document).on("ready page:load",u)}).call(this);e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n(_),o={HIDE:"hide",HIDE_POPOVER_ITEM:"action-bar__popover-hidden-item",MORE_POPOVER_HASMANY:"action-bar__more--has-many"},s={TOP_LEVEL_CONTAINER:".action-bar__item--link-container",TOP_LEVEL_LINK_CONTAINER:".action-bar__top-links",TOP_LEVEL_LINKS:".action-bar__link",POPOVER_CONTAINER:".action-bar__more",POPOVER_ITEMS:"[data-popover-index]",POPOVER_LABEL:".action-bar__more-label"},l=80,u=140,d=function(){function e(t){i(this,e);var n=$(t);this.$topLevelContainer=n.find(s.TOP_LEVEL_CONTAINER),this.$topLevelLinkContainer=n.find(s.TOP_LEVEL_LINK_CONTAINER),this.$topLevelLinks=this.$topLevelLinkContainer.find(s.TOP_LEVEL_LINKS),this.$popoverContainer=n.find(s.POPOVER_CONTAINER),this.$popoverItems=this.$popoverContainer.find(s.POPOVER_ITEMS),this.$popoverLabel=n.find(s.POPOVER_LABEL),this.popoverItemCount=this.$popoverItems.length,this.$topLevelContainer.removeClass(o.HIDE),this.checkLinkVisibility(),$(window).on("resize",r["default"].throttle(this.checkLinkVisibility,l).bind(this))}return t(e,[{key:"checkLinkVisibility",value:function(){var e=this._getContainerWidth();this._resetElementVisibility();var t=this._visibleLinksInContainer(e);this.showLinksInTopLevel(t),this.setPopoverLabel(t),this.setPopoverVisibility(t)}},{key:"showLinksInTopLevel",value:function(e){var t=this;this.$topLevelLinks.slice(e).addClass(o.HIDE);var i=void 0;this.$topLevelLinks.not("."+o.HIDE).each(function(e,n){i=$(n).data("popover-index"),t.$popoverContainer.find('[data-popover-index="'+i+'"]').addClass(o.HIDE_POPOVER_ITEM)})}},{key:"setPopoverVisibility",value:function(e){e===this.popoverItemCount?this.$popoverContainer.addClass(o.HIDE):this.$popoverContainer.removeClass(o.HIDE)}},{key:"setPopoverLabel",value:function(e){0===e?(this.$popoverContainer.addClass(o.MORE_POPOVER_HASMANY),this.$popoverLabel.text(this.$popoverLabel.data("singular-label"))):(this.$popoverContainer.removeClass(o.MORE_POPOVER_HASMANY),this.$popoverLabel.text(this.$popoverLabel.data("multiple-label")))}},{key:"_getContainerWidth",value:function(){return this.setPopoverLabel(),this.$topLevelLinks.addClass(o.HIDE),this.$topLevelContainer.width()-this.$popoverContainer.width()}},{key:"_resetElementVisibility",value:function(){this.$topLevelLinks.removeClass(o.HIDE),this.$popoverItems.removeClass(o.HIDE_POPOVER_ITEM),this.$popoverContainer.removeClass(o.HIDE).removeClass(o.MORE_POPOVER_HASMANY)}},{key:"_visibleLinksInContainer",value:function(e){var t=0,i=0;return this.$topLevelLinks.each(function(n,a){t+=$(a).outerWidth(),e>=t+u&&i++}),i}}]),e}();a["default"]=d,Shopify.TitleBarActions=null!=a["default"]?a["default"]:a}),e(function(){"use strict";window.Bugsnag&&(window.Bugsnag.metaData.bundles["shopify-home"]=!0)})}();